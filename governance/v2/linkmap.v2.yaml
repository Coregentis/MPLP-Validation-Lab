# Cross-Site Link Map v2
#
# SSOT for all cross-site links between:
# - lab.mplp.io (this site)
# - www.mplp.io (Website)
# - docs.mplp.io (Documentation)
#
# This file drives the generation of public/_data/v2/site-links.json
# Enforced by: GATE-V2-CROSSLINK-SSOT-01

version: "2.0.0"

cross_site_links:
  # Links FROM Lab TO Docs
  - source_page: "/runs"
    target_site: "docs"
    target_path: "/evaluation/overview"
    rationale: "Link to evaluation methodology documentation"
    rel_type: "related"
    link_text: "Learn about MPLP Evaluation"
  
  - source_page: "/runs/[run_id]"
    target_site: "docs"
    target_path: "/evaluation/evidence-packs"
    rationale: "Link to evidence pack structure documentation"
    rel_type: "related"
    link_text: "Evidence Pack Documentation"
  
  - source_page: "/rulesets"
    target_site: "docs"
    target_path: "/evaluation/rulesets"
    rationale: "Link to ruleset documentation"
    rel_type: "canonical"
    link_text: "Ruleset Documentation"
  
  - source_page: "/policies/fmm"
    target_site: "docs"
    target_path: "/protocol/field-mapping"
    rationale: "Link to field mapping methodology"
    rel_type: "related"
    link_text: "Field Mapping Methodology"
  
  - source_page: "/policies/contract"
    target_site: "docs"
    target_path: "/evaluation/indexability-contract"
    rationale: "Link to indexability contract definition"
    rel_type: "canonical"
    link_text: "Indexability Contract Definition"
  
  # Links FROM Lab TO Website
  - source_page: "/"
    target_site: "website"
    target_path: "/"
    rationale: "Link to main MPLP site"
    rel_type: "home"
    link_text: "MPLP Home"
  
  - source_page: "/coverage"
    target_site: "website"
    target_path: "/governance/protocol"
    rationale: "Link to protocol governance context"
    rel_type: "related"
    link_text: "Protocol Governance"

# Expected back-references (for audit purposes)
expected_backlinks:
  from_website:
    - source_path: "/tools"
      expected_target: "/runs"
      rationale: "Website should link to Lab runs from tools page"
  
  from_docs:
    - source_path: "/evaluation/overview"
      expected_target: "/runs"
      rationale: "Docs should link to Lab runs from evaluation overview"
    
    - source_path: "/evaluation/evidence-packs"
      expected_target: "/runs"
      rationale: "Docs should link to Lab runs as examples"

# Governance rules
rules:
  - name: "No hardcoded cross-site URLs"
    description: "All cross-site links must use hosts.ts + this linkmap"
    enforcement_gate: "GATE-V2-CROSSLINK-SSOT-01"
  
  # @v2-exempt HOST_ALLOW pattern-definition
  - name: "No localhost references" # @v2-exempt HOST_ALLOW pattern-definition
    # @v2-exempt HOST_ALLOW pattern-definition
    description: "No localhost or preview domain links allowed" # @v2-exempt HOST_ALLOW pattern-definition
    enforcement_gate: "GATE-V2-HOST-ALLOW-01"
  
  - name: "Canonical host enforcement"
    description: "All canonical URLs must use CANONICAL_HOST from hosts.ts"
    enforcement_gate: "GATE-V2-CANONICAL-01"
